<h1 align="center">
  xpdig
</h1>

<p align="center">
  üß∞ A terminal based UI to explore Crossplane traces
</p>

![demo gif](./demo.gif)

`xpdig` provides a terminal based UI (similar to `k9s`) to interactively explore Crossplane traces,
making it easier to navigate, debug and understand objects. It leverages `crossplane trace` to render the object tree.

## ‚ú® Features

### Trace

- ‚ú® Expanded details at a glance, with highlight colouring for possible issues
- üìñ Show YAML objects from the explorer, without needing to separately execute kubectl
- üìñ View clean object YAMLs without `managedFields` (useful on apply, not as much on describe/get)
- üìã Copy full qualified objects names straight from UI (API group + Kind + name)
- ‚ôªÔ∏è Automatic refresh

### Wish-list

- Allow describing objects (kubectl describe)
- Allow mutating resource annotations (pause, finaliser)

## üìÄ Install

> ‚ö†Ô∏è **You must have `crossplane` installed, since this application runs the CLI within it**

### Linux and Windows

[Check the releases section](https://github.com/brunoluiz/xpdig/releases) for more information details.

### MacOS

```
brew install brunoluiz/tap/xpdig
```

### Other

Use `go install` to install it

```
go install github.com/brunoluiz/xpdig/cmd/xpdig@latest
```

## ‚öôÔ∏è Usage

```
# Loads a trace
xpdig trace -n <namespace> Object/hello-world

# Loads a trace with live reload
xpdig trace -n <namespace> --watch Object/hello-world

# Loads a trace generated by `crossplane beta trace -o json <>`
cat <trace.json> | xpdig trace --stdin
crossplane beta trace -o json <> | xpdig trace --stdin
```

### Navigation

- `h/?`: show help
- `arrow keys or j/k`: cursor up/down
- `enter/y`: shows YAML retrieved by crossplane trace
- `/`: search (ENTER to submit, ESC to clear)
- `n/N`: navigate between search results
- `ctrl+f/ctrl+b | f/b | pageUp/pageDown`: jumps full page of results (up or down)
- `c`: copies path under cursor
- `q/ctrl+c`: quit
